@inherits LayoutComponentBase
@inject IBootstrapCss BootstrapCSS

@using Test.Data
@using Test.Data.Modal
@inject WebService service

<BSButton OnClick="@(() => GetBets())">Нажми чтобы появились ставки</BSButton>


        <BSModal @ref="Modal">
            <BSModalHeader OnClick="@(() => Modal.Hide())">Выбор ставки</BSModalHeader>
            <BSModalBody>
                @if (@Event != null)
                {
                    <BSContainer>
                        <BSRow>
                            <BSCol XS = "3">
                                @Event.IdTeam1Navigation.Title
                            </BSCol>
                            <BSCol></BSCol>
                            <BSCol XS = "3">
                                @Event.IdTeam2Navigation.Title
                            </BSCol>
                        </BSRow>
                        <BSRow>
                            <BSCol XS = "3"> 
                                <BSImage style="max-width: 75px;" IsRounded="true" Alignment="Alignment.Center" src="@Event.IdTeam1Navigation.Logo" alt="Thumbnail image" />
                            </BSCol>
                            <BSCol><span style="font-size: 2vmax;">VS</span></BSCol>
                            <BSCol XS = "3">
                                <BSImage style="max-width: 75px;" IsRounded="true" Alignment="Alignment.Center" src="@Event.IdTeam2Navigation.Logo" alt="Thumbnail image" />
                            </BSCol>
                        </BSRow>
                        <BSRow>
                            <BSCol>
                                <hr>
                            </BSCol>
                        </BSRow>
                        @foreach (var bet in Bets)
                        {
                            <BSRow>
                                <BSCol XS = "3">
                                    <BSButton Size = "Size.Small">Поставить</BSButton>
                                </BSCol>
                                <BSCol XS = "1">
                                    @bet.Coef1
                                </BSCol>
                                <BSCol XS = "4">
                                    @bet.IdTobNavigation.Title
                                </BSCol>
                                <BSCol XS = "1">
                                    @bet.Coef2
                                </BSCol>
                                <BSCol XS = "3">
                                    <BSButton Size = "Size.Small">Поставить</BSButton>
                                </BSCol>
                            </BSRow>
                            <br>
                        }
                    </BSContainer>
                }
            </BSModalBody>
            <BSModalFooter>
                <BSButton Color="Color.Secondary" @onclick="@(() => Modal.Hide())">Закрыть</BSButton>
            </BSModalFooter>
        </BSModal>


@code{
    ////////////////////////////////////////////////////////////////
    private BSModal Modal { get; set; }
    private Event Event { get; set; }

    private List<PossibleBet> Bets { get; set; }


    private void GetBets()
    {
        var temp = service.GetFutureEvents(new Sport { Id = 1 });
        Event = temp[2];

        Bets = service.GetPossibleBets(Event);

        Modal.Show();
    }
    /////////////////////////////////////////
}